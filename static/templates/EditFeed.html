<TMPL_INCLUDE NAME='_header.html'>
<TMPL_INCLUDE NAME='_navbar.html'>

<div class="container-fluid">
	<div class="row">
		<TMPL_INCLUDE NAME='_sidebar.html'>
		<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
			<h2 class="sub-header"><TMPL_VAR NAME="url"></h2>
			<a id="togglerawentries" class="btn btn-info">Show raw entries</a><br >

			<div id="rawentries" class="table-responsive">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>ID</th>
							<th>Title</th>
							<th>Link</th>
							<th>Content</th>
							<th>Author</th>
							<th>Issued</th>
							<th>Modified</th>
							<th>Tags</th>
						</tr>
					</thead>
					<tbody>
						<TMPL_LOOP NAME="ENTRIES">
						<tr class="<TMPL_VAR NAME="class">">
							<td><TMPL_VAR NAME="id"></td>
							<td><TMPL_VAR NAME="title"></td>
							<td><TMPL_VAR NAME="link"></td>
							<td><TMPL_VAR NAME="content"></td>
							<td><TMPL_VAR NAME="author"></td>
							<td><TMPL_VAR NAME="issued"></td>
							<td><TMPL_VAR NAME="modified"></td>
							<td><TMPL_VAR NAME="tags"></td>
						</tr>
						</TMPL_LOOP>
					</tbody>
				</table>
			</div>

			<form id="form_format" method="POST">
			<input type="hidden" name="action" value="saveformat">
			<h3>Format</h3>
			<div id="format">
				Enter the format for the toot. You can use the placeholders <code>{ID}</code>, <code>{Title}</code>, <code>{Link}</code>, <code>{Content}</code>, <code>{Author}</code>, <code>{Issued}</code>, <code>{Modified}</code> and <code>{Tags}</code> to substitute the respective values. <br />
				<i>Anything greater than 500 chars will be truncated. URL's shall be preserved.</i><br />
				<input type="text" placeholder="{Title} - {Link} by {Author} -- posted at {Issued} with #RSSTootalizer" maxlength=500 value="<TMPL_VAR NAME="format">" name="format" class="btn-block"><br />
				<input type="Submit" value="Save format" class="btn btn-primary btn-block">
			</div>
			</form>

			<form id="form_filters" method="POST">
			<input type="hidden" name="action" value="save">
			<h3>Filters</h3>
			<div id="filters" class="table-responsive">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Field</th>
							<th>Matches</th>
							<th>Regex</th>
							<th>Type</th>
							<th>Delete</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
				<a id="savefilters" class="btn btn-primary" href="#">Save filters</a> <a id="addfilter" class="btn btn-info">Add filter</a>
			</div>
			</form>

			<form id="form_digest" method="POST">
			<input type="hidden" name="action" value="savedigest">
			<h3>Toot Digest</h3>
			<div>
				For highly active feeds you may want to toot multiple posts together rather than separately avoiding a flood.<br />
				<i>To avoid repetition of 'Format' for each post within a digest, use the Signature field for information that should appear only once i.e. hashtags.</i><br />
				<i>Placeholder text shall be truncated if necessary. URL's shall be preserved. Any other format text will remain.</i><br />
				<input type="text" id="diglim" maxlength=2 value="<TMPL_VAR NAME="digestlimit">" name="digestlimit"> posts will be combined into a digest.<br />
				<input type="text" placeholder="Signed #RSSTootalizer" maxlength=100 value="<TMPL_VAR NAME="digestsig">" name="digestsig" class="btn-block"><br />
				<input type="Submit" value="Save digest" class="btn btn-primary">
				<TMPL_IF NAME="digestenabled"><a class="btn btn-danger disabledigest" data-id="<TMPL_VAR NAME="feed_id">" href="#">Disable</a><TMPL_ELSE><a class="btn btn-default enabledigest" data-id="<TMPL_VAR NAME="feed_id">" href="#">Enable</a></TMPL_IF>
			</div>
			</form>

		</div>
	</div>
</div>
<script type="text/javascript">
var filters = [];
<TMPL_LOOP NAME="FILTERS">
filters.push({ID: <TMPL_VAR NAME="ID">, field: "<TMPL_VAR NAME="field">", regex: decodeURIComponent("<TMPL_VAR ESCAPE=URL NAME="regex">"), type: "<TMPL_VAR NAME="type">", match: "<TMPL_VAR NAME="match">"});
</TMPL_LOOP>
</script>
<TMPL_INCLUDE NAME='_footer.html'>
